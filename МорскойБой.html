
<HTML>
    <HEAD>
		<meta charset="utf8">
	    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    </HEAD>
    <BODY style="background-color: #000; margin-left: 425px;" >
        <div style="float: left;" >
            <div id="1" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="1" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
        <div style="float: left;" >
            <div id="1" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="2" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		<div style="float: left;" >
            <div id="1" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="3" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		<div style="float: left;" >
            <div id="1" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="4" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		<div style="float: left;" >
            <div id="1" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="5" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		<div style="float: left;" >
            <div id="1" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="6" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div><div style="float: left;" >
            <div id="1" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="7" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		<div style="float: left;" >
            <div id="1" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="8" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		<div style="float: left;" >
            <div id="1" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="9" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		<div style="float: left;" >
            <div id="1" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="2" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="3" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="4" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="5" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="6" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="7" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="8" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="9" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
            <div id="10" class="10" style="background-color: #3366CC; border: 1px solid #fff; width: 40px; height: 40px;"></div>
        </div>
		
    </BODY>
</HTML>

<script>
	// Ввести имя игрока
	//var player = prompt("Введите Ваше имя.");
	
	// Поприветствовать
	//alert("Доброго времени суток, " + player + ".");

	// будет использоваться двумерный массив
	var n = 10, m = 10;
	var table1 = [];
	for (var i = 0; i < m; i++){
		table1[i] = [];
		for (var j = 0; j < n; j++){
			table1[i][j] = 0;
		}
	}
		generationBord();
	
	//функция размещающая корабли
	//функция проверяющая можно ли там разместить корабль.
	
	// 1. Определяется какой карабль будет размещен (Берется самый большой из оставшихся)
	// 2. Определяется координата из дух случайных чисел
	// 3. Определяется занята ли эта координата и 8 соседних
	// 3.1. Проверка нужна на границу доски
	// 4. Проверка влезет ли весь корабль
	// 4.1 ВОТ ТУТ ТО НУЖНО ПОДРРОБНО ПОДУМАТЬ. ИЛИ ДЕЛАТЬ КУЧУ ПРОВЕРОК ЛИБО ДЕЛАТЬ ОГРАНИЧЕНИЕ НА ПОПЫТКИ ПОИСКА МЕСТА
	// 5. Разместить корабль.
	// 6. Вычернукть его из списка оставшихся кораблей и взять следующий.
	
	// Автоматически разместить корабль на поле
	/*var ship = new Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0);
	var r = getRandomInt(1, 8); // 1-7
	ship[r] = 1;
	ship[r + 1] = 1;
	ship[r + 2] = 1;*/


	var flagGameOver = false; // проверка на завершение игры
	var x; // число пользователя
	var col = 0; // количесво попыток

	window.onload = function() {
		document.body.onclick = function(event) {
			t=event.target||event.srcElement; 
			//$(t).css("background-color", "#336633");
			 
			col++;
			var x = parseInt($(t).attr('id')) - 1;
			var y = parseInt($(t).attr('class')) - 1;

			// Проверить попали или нет
			// Вывести на экран: попали или промазали
			if(table1[x][y] == 1) 
			{
				//alert("Молодец, подбил!");
				table1[x][y] = -1;
				$(t).css("background-color", "#336633");
				
			}
			else if(table1[x][y] == -1) 
			{
				//alert(player + ", Вы уже стреляли по этому квадрату!!!");
			}
			else 
			{
				//alert("Эх, мимо!");
				table1[x][y] = -1;
				$(t).css("background-color", "#663366");
			}

			flagGameOver = true;
			for(var i = 0; i < 10; i++){
				for(var j = 0; j < 10; j++){
					if(table1[i][j] == 1) flagGameOver = false;
				}
			}

			 if(flagGameOver) alert("Корабль был потоплен с " + col + "(ой) попытки!\n" 
				+ "Поздравляем c победой!\n"
				+ "До встречи в новой игре!");
			}
	}
	
	function generationBord(){
		/*var flag = true;
		while(flag){
			

			var board = new Array(0, 0, 0, 0, 0, 0);
			for(var i = 0; i < 6; i++){
				board[i] = getRandomInt(2, 5);
			}
			
			
			// если корабли удачно сгенерированы то выйти из цикла 
			var col2 = 0;
			var col3 = 0;
			var col4 = 0;
			board.forEach(function(item, i, arr) {
				if(item == 2) col2++;
				if(item == 3) col3++;
				if(item == 4) col4++;
			});
			if(col2 == 3 && col3 == 2 && col4 == 1){
				flag = false;
			
				var iBrd = 0;
				while(iBrd < 6){
					var sum = 0;
					while(sum < 8 || iBrd > 5){
						sum = sum + board[iBrd] + 1;
						iBrd++;
					}
				
					var colP = 0;
					// расставляем корабли
					for(var j = 0; j < iBrd; j++){
						for(var i = 0; i < board[j]; i++){
							table1[nextCrd(0, 0)][0] = 1;
						
						}
						if(colP < iBrd - 1){
							table1[nextCrd(0, 0)][0] = -1;
							colP++;
						}
						else 
							if(sum == 8) table1[nextCrd(0, 0)][0] = -1;
					}
				}
			}
		}
	*/
	
	
		// генерируем корабли и порядок расстановки
		var flag = true;
		while(flag){
			var board = new Array(0, 0, 0, 0, 0, 0);
			for(var i = 0; i < 6; i++){
				board[i] = getRandomInt(2, 5);
			}

			var sum = board[0] + board[1] + board[2];
			var sum2 = board[3] + board[4] + board[5];

			if(sum == 8 && sum2 == 8){
				var col2 = 0;
				var col3 = 0;
				var col4 = 0;
				board.forEach(function(item, i, arr) {
					if(item == 2) col2++;
					if(item == 3) col3++;
					if(item == 4) col4++;
				
				});
				if(col2 == 3 && col3 == 2 && col4 == 1)
					flag = false;
			}
		}
		
		var colP = 0;
		// расставляем корабли
		for(var j = 0; j < 3; j++){
			for(var i = 0; i < board[j]; i++){
				table1[nextCrd(0, 0)][0] = 1;
			}
			if(colP < 2){
				table1[nextCrd(0, 0)][0] = -1;
				colP++;
			}
		}
		var colP = 0;
		for(var j = 3; j < 6; j++){
			for(var i = 0; i < board[j]; i++){
				table1[nextCrd(2, 0)][2] = 1;
			}
			if(colP < 2){
				table1[nextCrd(2, 0)][2] = -1;
				colP++;
			}
		}
		// генерируем начальную точку размещения
		// будем поворачивать через фор столько сколько сгенерируется от 0 до 3х
		
		
		// Подготавливаем доску. -1 заменяем на 0
		for(var i = 0; i < 10; i++){
				for(var j = 0; j < 10; j++){
					if(table1[i][j] == -1) table1[i][j] = 0;
				}
			}
		
		// расставляем 4 однопалубника
		var col1bord = 0;
		var flag111 = true;
		while(flag111){
			var k = getRandomInt(0, 10);
			var l = getRandomInt(0, 10);
			if(myFunEmpty(k, l))
				if(myFunEmpty(k, l + 1))
					if(myFunEmpty(k + 1, l))
						if(myFunEmpty(k + 1, l + 1))
							if(myFunEmpty(k + 1, l + 1))
								if(myFunEmpty(k, l - 1))
									if(myFunEmpty(k - 1, l))
										if(myFunEmpty(k - 1, l - 1))
											if(myFunEmpty(k - 1, l - 1)){
												table1[k][l] = 1;
												col1bord++;
										}
			
			if(col1bord == 4) flag111 = false;
		}
		
		// вращаем доску случайным образом
		for(var i = 0; i < getRandomInt(0, 5); i++){ // от 0 до 3х 
			ternBord(table1);
		}
		
	}
	
	function myFunEmpty(k, l){
		if(k < 0 || k > 10 || l < 0 || l > 10)
			return true;
		if(table1[k][l] == 0)
			return true;
		else
			return false;
	}
	
	function nextCrd(a, str){
		if(str == 0){
			for(var i = 0; i < 10; i++){
				if(table1[i][a] == 0) return i;
			}
			
		}
		if(str == 1){
			for(var i = 0; i < 10; i++){
				if(table1[a][i] == 0) return i;
			}
			
		}
		if(str == 2){
			for(var i = 10; i > 0; i--){
				if(table1[i][a] == 0) return i;
			}
			
		}
		
		alert("Ошибка #278");
	}
	
	function getRandomInt(min, max) {
		return Math.floor(Math.random() * (max - min)) + min;
	}
	
	// функция поворота доски
	function ternBord(arr){
		var tmp = matrixArray(10,10);
            var n = 10;
            for( var i = 0; i < n / 2; i++ ){
                for ( var j = i; j < n - 1 - i; j++ ){
                    tmp = arr[i][j];
					arr[i][j] = arr[n-j-1][i];
					arr[n-j-1][i] = arr[n-i-1][n-j-1];
					arr[n-i-1][n-j-1] = arr[j][n-i-1];
					arr[j][n-i-1] = tmp;
                }
            }
			//alert(tmp + "\n" + arr);
			//return arr;
	}
	
	// Функция создает двумерные массивы
	function matrixArray(rows,columns){
		var arr = new Array();
		for(var i=0; i<columns; i++){
			arr[i] = new Array();
			for(var j=0; j<rows; j++){
				arr[i][j] = null;//вместо i+j+1 пишем любой наполнитель. В простейшем случае - null
			}
		}
		return arr;
	}
</script>





